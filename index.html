<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Hutson vs Suzuki â€” Points Tracker</title>

  <!-- âœ… Correct Google Fonts links (no bare URLs) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">


  <style>
    :root { --ice-blue:#0a1628; --canadiens-red:#af1e2d; --bright-ice:#e8f4f8; --highlight:#00d9ff; --gold:#ffd700; }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Rajdhani',sans-serif;background:linear-gradient(135deg,var(--ice-blue) 0%,#1a2942 100%);color:var(--bright-ice);min-height:100vh;overflow-x:hidden;position:relative}
    body::before{content:'';position:fixed;inset:0;background:
      repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,255,255,.03) 2px,rgba(255,255,255,.03) 4px),
      repeating-linear-gradient(90deg,transparent,transparent 2px,rgba(255,255,255,.03) 2px,rgba(255,255,255,.03) 4px);pointer-events:none;z-index:1}
    .container{max-width:1200px;margin:0 auto;padding:40px 20px;position:relative;z-index:2}
    header{text-align:center;margin-bottom:60px;animation:slideDown .8s ease-out}
    @keyframes slideDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
    h1{font-family:'Bebas Neue',cursive;font-size:clamp(3rem,8vw,7rem);letter-spacing:.05em;margin-bottom:10px;
       background:linear-gradient(135deg,var(--highlight) 0%,var(--bright-ice) 50%,var(--canadiens-red) 100%);
       -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 40px rgba(0,217,255,.3)}
    .tagline{font-size:1.2rem;color:var(--highlight);text-transform:uppercase;letter-spacing:.2em;font-weight:600}
    .answer-box{background:rgba(10,22,40,.6);border:3px solid var(--canadiens-red);border-radius:20px;padding:60px 40px;margin:40px 0;
                text-align:center;position:relative;overflow:hidden;backdrop-filter:blur(10px);
                box-shadow:0 20px 60px rgba(175,30,45,.3);animation:fadeIn 1s ease-out .3s both}
    @keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
    .answer-box::before{content:'';position:absolute;inset:-2px;background:linear-gradient(45deg,var(--canadiens-red),var(--highlight),var(--canadiens-red));
                        border-radius:20px;z-index:-1;opacity:0;animation:borderGlow 3s ease-in-out infinite}
    @keyframes borderGlow{0%,100%{opacity:0}50%{opacity:.3}}
    .loading{font-size:2rem;font-weight:700;color:var(--highlight);text-transform:uppercase;letter-spacing:.1em}
    .spinner{display:inline-block;width:40px;height:40px;border:4px solid rgba(0,217,255,.1);border-top:4px solid var(--highlight);
             border-radius:50%;animation:spin 1s linear infinite;margin:20px auto}
    @keyframes spin{to{transform:rotate(360deg)}}
    .answer{font-family:'Bebas Neue',cursive;font-size:clamp(3rem,6vw,5rem);line-height:1.2;margin:20px 0;animation:pulse 2s ease-in-out infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
    .answer.yes{color:var(--gold);text-shadow:0 0 30px rgba(255,215,0,.5)}
    .answer.no{color:var(--canadiens-red);text-shadow:0 0 30px rgba(175,30,45,.5)}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;margin:50px 0;animation:fadeIn 1s ease-out .6s both}
    .player-card{background:linear-gradient(135deg,rgba(26,41,66,.8) 0%,rgba(10,22,40,.8) 100%);border:2px solid var(--highlight);border-radius:15px;
                 padding:30px;position:relative;overflow:hidden;transition:.3s;backdrop-filter:blur(10px)}
    .player-card:hover{transform:translateY(-10px);border-color:var(--gold);box-shadow:0 15px 40px rgba(0,217,255,.3)}
    .player-card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,217,255,.1),transparent);
                         transition:left .5s ease}
    .player-card:hover::before{left:100%}
    .player-name{font-family:'Bebas Neue',cursive;font-size:2.5rem;margin-bottom:15px;color:var(--highlight);letter-spacing:.05em}
    .stat-line{display:flex;justify-content:space-between;align-items:center;margin:15px 0;padding:10px 0;border-bottom:1px solid rgba(232,244,248,.1);font-size:1.2rem}
    .stat-label{color:rgba(232,244,248,.7);font-weight:600;text-transform:uppercase;letter-spacing:.05em}
    .stat-value{font-family:'Bebas Neue',cursive;font-size:2rem;color:var(--gold);text-shadow:0 0 10px rgba(255,215,0,.3)}
    .leader{border-color:var(--gold);background:linear-gradient(135deg,rgba(255,215,0,.1) 0%,rgba(26,41,66,.8) 100%)}
    .leader .player-name{color:var(--gold)}
    .crown{position:absolute;top:10px;right:10px;font-size:2rem;animation:float 2s ease-in-out infinite}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
    .refresh-btn{background:linear-gradient(135deg,var(--canadiens-red) 0%,#8a1623 100%);color:#fff;border:none;padding:18px 40px;font-size:1.2rem;font-weight:700;
                 text-transform:uppercase;letter-spacing:.1em;border-radius:10px;cursor:pointer;transition:.3s;margin:30px auto;display:block;
                 font-family:'Rajdhani',sans-serif;box-shadow:0 10px 30px rgba(175,30,45,.4)}
    .refresh-btn:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(175,30,45,.6);background:linear-gradient(135deg,#d42434 0%,var(--canadiens-red) 100%)}
    .details{margin-top:20px;font-size:1.1rem;line-height:1.6;color:rgba(232,244,248,.8)}
    .timestamp{text-align:center;margin-top:40px;color:rgba(232,244,248,.5);font-size:.9rem;text-transform:uppercase;letter-spacing:.1em}
    @media (max-width:768px){.stats-grid{grid-template-columns:1fr}.answer-box{padding:40px 20px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>HUTSON VS SUZUKI</h1>
      <div class="tagline">MontrÃ©al Canadiens Points Race</div>
    </header>

    <div class="answer-box" id="answerBox">
      <div class="loading" id="loading">
        <div>Checking NHL Statsâ€¦</div>
        <div class="spinner"></div>
      </div>
      <div id="answer" style="display:none;">
        <div class="answer" id="answerText"></div>
        <div class="details" id="details"></div>
      </div>
    </div>

    <div class="stats-grid" id="statsGrid" style="display:none;">
      <div class="player-card" id="hutsonCard">
        <div class="player-name">Lane Hutson</div>
        <div class="stat-line"><span class="stat-label">Points</span><span class="stat-value" id="hutsonPoints">â€“</span></div>
        <div class="stat-line"><span class="stat-label">Goals</span><span class="stat-value" id="hutsonGoals">â€“</span></div>
        <div class="stat-line"><span class="stat-label">Assists</span><span class="stat-value" id="hutsonAssists">â€“</span></div>
      </div>
      <div class="player-card" id="suzukiCard">
        <div class="player-name">Nick Suzuki</div>
        <div class="stat-line"><span class="stat-label">Points</span><span class="stat-value" id="suzukiPoints">â€“</span></div>
        <div class="stat-line"><span class="stat-label">Goals</span><span class="stat-value" id="suzukiGoals">â€“</span></div>
        <div class="stat-line"><span class="stat-label">Assists</span><span class="stat-value" id="suzukiAssists">â€“</span></div>
      </div>
    </div>

    <button class="refresh-btn" id="refreshBtn" style="display:none;">Refresh Stats</button>
    <div class="timestamp" id="timestamp"></div>
  </div>

  <script>
    // --- Season code (e.g., 20252026) ---
    function currentSeasonCode(d=new Date()){
      const y=d.getUTCFullYear(), m=d.getUTCMonth();
      const start=(m>=7)?y:(y-1); // Aug (7)+ => new season
      return String(start)+String(start+1);
    }

    // Known IDs (verified on NHL.com player pages)
  
const FALLBACK_IDS = {
  HUTSON: '8483457', // Lane Hutson
  SUZUKI: '8480018'  // Nick Suzuki
};


    // --- Suggest ID from name, with fallback ---
    async function getPlayerId(fullName, fallbackId){
      try{
        const q=encodeURIComponent(fullName.toLowerCase());
        const url=`https://suggest.svc.nhl.com/svc/suggest/v1/minplayers/${q}/5`;
        const r=await fetch(url,{mode:'cors'});
        if(!r.ok) throw new Error('Suggest HTTP '+r.status);
        const data=await r.json();
        const items=(data.suggestions||[]).map(s=>s.split('|'))
          .map(a=>({id:a[0],last:(a[1]||'').toLowerCase(),first:(a[2]||'').toLowerCase()}));
        if(!items.length) throw new Error('No suggestions');
        const [first,last]=fullName.toLowerCase().split(' ');
        const exact=items.find(p=>p.first===first && p.last===last) || items[0];
        console.debug('Suggest OK for', fullName, 'â†’', exact.id);
        return exact.id;
      }catch(err){
        console.warn('Suggest failed for', fullName, 'â†’ using fallback ID', fallbackId, err);
        return fallbackId;
      }
    }

    // --- NHL Stats API: single-season stats ---
    async function getSeasonStats(playerId, season){
      const url=`https://statsapi.web.nhl.com/api/v1/people/${playerId}/stats?stats=statsSingleSeason&season=${season}`;
      const r=await fetch(url,{mode:'cors'});
      if(!r.ok) throw new Error('Stats HTTP '+r.status);
      const j=await r.json();
      const stat=j?.stats?.[0]?.splits?.[0]?.stat || {};
      return {
        games: stat.games ?? 0,
        goals: stat.goals ?? 0,
        assists: stat.assists ?? 0,
        points: stat.points ?? ((stat.goals ?? 0) + (stat.assists ?? 0))
      };
    }

    function render(hutson, suzuki){
      const loading=document.getElementById('loading');
      const answerBox=document.getElementById('answer');
      const statsGrid=document.getElementById('statsGrid');
      const refreshBtn=document.getElementById('refreshBtn');
      const answerText=document.getElementById('answerText');
      const details=document.getElementById('details');
      const timestamp=document.getElementById('timestamp');

      document.getElementById('hutsonPoints').textContent=hutson.points;
      document.getElementById('hutsonGoals').textContent=hutson.goals;
      document.getElementById('hutsonAssists').textContent=hutson.assists;
      document.getElementById('suzukiPoints').textContent=suzuki.points;
      document.getElementById('suzukiGoals').textContent=suzuki.goals;
      document.getElementById('suzukiAssists').textContent=suzuki.assists;

      const hutsonCard=document.getElementById('hutsonCard');
      const suzukiCard=document.getElementById('suzukiCard');
      hutsonCard.classList.remove('leader'); suzukiCard.classList.remove('leader');
      hutsonCard.querySelectorAll('.crown').forEach(el=>el.remove());
      suzukiCard.querySelectorAll('.crown').forEach(el=>el.remove());
      if(hutson.points > suzuki.points){
        hutsonCard.classList.add('leader'); hutsonCard.insertAdjacentHTML('afterbegin','<div class="crown">ðŸ‘‘</div>');
        answerText.textContent='YES!'; answerText.className='answer yes';
        details.textContent=`Lane Hutson leads with ${hutson.points} points vs Nick Suzuki's ${suzuki.points}.`;
      }else if(suzuki.points > hutson.points){
        suzukiCard.classList.add('leader'); suzukiCard.insertAdjacentHTML('afterbegin','<div class="crown">ðŸ‘‘</div>');
        answerText.textContent='NO'; answerText.className='answer no';
        details.textContent=`Nick Suzuki leads with ${suzuki.points} points vs Lane Hutson's ${hutson.points}.`;
      }else{
        hutsonCard.classList.add('leader'); suzukiCard.classList.add('leader');
        answerText.textContent='TIED!'; answerText.className='answer yes';
        details.textContent=`Both players are tied at ${hutson.points} points.`;
      }

      loading.style.display='none'; answerBox.style.display='block'; statsGrid.style.display='grid'; refreshBtn.style.display='block';
      timestamp.textContent='Last updated: '+new Date().toLocaleString();
    }

  
async function fetchAndUpdate(){
  const loading=document.getElementById('loading');
  const answerBox=document.getElementById('answer');
  const statsGrid=document.getElementById('statsGrid');
  const refreshBtn=document.getElementById('refreshBtn');
  loading.style.display='block'; answerBox.style.display='none'; statsGrid.style.display='none'; refreshBtn.style.display='none';

  try{
    const season=currentSeasonCode(new Date());

    // âœ… Use FALLBACK_IDS (with underscore) for both players
    const [hutsonId, suzukiId]=await Promise.all([
      getPlayerId('Lane Hutson', FALLBACK_IDS.HUTSON),
      getPlayerId('Nick Suzuki', FALLBACK_IDS.SUZUKI)
    ]);

    console.debug('Using IDs â†’ Hutson:', hutsonId, 'Suzuki:', suzukiId);

    // Now fetch season stats; this still works even if Suggest failed
    const [hutson, suzuki]=await Promise.all([
      getSeasonStats(hutsonId, season),
      getSeasonStats(suzukiId, season)
    ]);

    render(hutson, suzuki);
  }catch(e){
    console.error('Final stats error:', e);
    loading.innerHTML='<div style="color: var(--canadiens-red);">Error loading stats. Please refresh.</div>';
  }
}

    document.getElementById('refreshBtn').addEventListener('click', fetchAndUpdate);
    fetchAndUpdate();
  </script>

  <!-- Data sources:
       - Player IDs: NHL Suggest service (suggest.svc.nhl.com)  [1](https://www.exploit-db.com/google-hacking-database)
       - Season stats: NHL Stats API (statsapi.web.nhl.com)     [2](https://github.com/search.html)
       - Known player IDs for fallback: Suzuki 8480018, Hutson 8483457 (NHL.com player pages)  [3](https://github.com/jonathonRcampbell/hutson-vs-suzuki)[4](https://mcgill-my.sharepoint.com/personal/jonathon_campbell_mcgill_ca/Documents/Microsoft%20Copilot%20Chat%20Files/index.html) -->
</body>
</html>


